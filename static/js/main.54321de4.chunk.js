(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{108:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return P})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return M}));n(113);var r=n(15),a=n(29),c=n(26),i=n(2),o=n.n(i),u=n(7),s=n(0),l=n.n(s),f=n(95),d=n(71),b=n(6),p=n(33),h=(n(80),n(208)),g=n(50),v=n(120),m=n(4),j=l.a.createContext(null),x=new Map,O=new Map,y=new Map,w=new Map,k=function(){var t=Object(u.a)(o.a.mark((function t(n,r){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return c=e.from(a.data),t.abrupt("return",M(c));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),A=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=I(r);return{pubkey:t,account:Object(c.a)({},n),info:a}}},B=new Map,S={emitter:new h.a,query:function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var a,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.c(n):n,c=a.toBase58(),!(i=O.get(c))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(u=x.get(c))){e.next=8;break}return e.abrupt("return",u);case 8:return u=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return S.add(a,e,r)})),x.set(c,u),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),c=n||B.get(a);if(!c)throw new Error("Deserializer needs to be registered or passed as a parameter");S.registerParser(e,c),x.delete(a);var i=c(a,t);if(i){void 0===r?r=!0:r instanceof Function&&(r=r(i));var o=!O.has(a);return O.set(a,i),S.emitter.raiseCacheUpdated(a,o,c,r),i}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,O.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!O.get(t)&&(O.delete(t),S.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(B.keys());try{for(r.s();!(t=r.n()).done;){var c=t.value;B.get(c)===e&&n.push(c)}}catch(i){r.e(i)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();B.set(n,t)}return e},queryMint:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.c(n):n,a=r.toBase58(),!(c=w.get(a))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(i=y.get(a))){e.next=8;break}return e.abrupt("return",i);case 8:return i=k(t,r).then((function(e){return y.delete(a),w.set(a,e),e})),y.set(a,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},addMint:function(e,t){var n=M(t.data),r=e.toBase58();return w.set(r,n),n}};var C=function(){var e=Object(f.useConnection)(),t=Object(d.b)().publicKey,n=Object(s.useState)(),a=Object(r.a)(n,2),c=a[0],i=a[1],l=Object(s.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.c(e);return{pubkey:e,account:t,info:{address:n,mint:g.f,owner:n,amount:new p.f(t.lamports),delegate:null,delegatedAmount:new p.f(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();S.registerParser(r,A),O.set(r,n),S.emitter.raiseCacheUpdated(r,!1,A,!0)}}}),[t]);return Object(s.useEffect)((function(){var n=0,r=function(e){e&&(l(e),i(e))};return Object(u.a)(o.a.mark((function a(){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:c=a.sent,r(c),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[i,t,e,l]),{nativeAccount:c}},E=new Set,T=function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return E.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(v.a)().token});case 5:e.sent.value.forEach((function(e){S.add(e.pubkey.toBase58(),e.account,A)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function P(e){var t=e.children,n=void 0===t?null:t,a=Object(f.useConnection)(),c=Object(d.b)().publicKey,i=Object(s.useState)([]),o=Object(r.a)(i,2),u=o[0],l=o[1],h=Object(s.useState)([]),g=Object(r.a)(h,2),x=g[0],O=g[1],y=C().nativeAccount,w=null===c||void 0===c?void 0:c.toBase58(),k=Object(s.useCallback)((function(){return S.byParser(A).map((function(e){return S.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===w})).map((function(e){return e}))}),[w]);return Object(s.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));O(e)}),[y,u,k]),Object(s.useEffect)((function(){var e=[];return S.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.c(t),(function(e){S.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(s.useEffect)((function(){if(a&&c){T(a,c).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(v.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===p.a.span){var n=I(e.accountInfo.data);E.has(n.owner.toBase58())&&(S.add(t,e.accountInfo,A),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,c,k]),Object(m.jsx)(j.Provider,{value:{userAccounts:x,nativeAccount:y},children:n})}var I=function(e){var t=p.a.decode(e);return t.mint=new b.c(t.mint),t.owner=new b.c(t.owner),t.amount=p.f.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new p.f(0)):(t.delegate=new b.c(t.delegate),t.delegatedAmount=p.f.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=p.f.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.c(t.closeAuthority),t},M=function(e){if(e.length!==p.b.span)throw new Error("Not a valid Mint");var t=p.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.c(t.mintAuthority),t.supply=p.f.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.c(t.freezeAuthority),t}}).call(this,n(13).Buffer)},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(2),n(7);var r=n(50),a=function(){return{token:r.e,associatedToken:r.c,bpf_upgrade_loader:r.a,system:r.d,memo:r.b}}},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var r=n(297),a=n(4);function c(e){var t=e.message,n=void 0===t?"":t,c=e.description,i=void 0===c?void 0:c,o=e.txid,u=void 0===o?"":o,s=e.type,l=void 0===s?"info":s,f=e.placement,d=void 0===f?"bottomLeft":f;u&&(i=Object(a.jsx)(a.Fragment,{})),r.a[l]({message:Object(a.jsx)("span",{style:{color:"black"},children:n}),description:Object(a.jsx)("span",{style:{color:"black",opacity:.5},children:i}),placement:d,style:{backgroundColor:"white"}})}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(719),a=n(80),c=n(4),i=function(e){var t,n,i=e.type,o=e.code,u="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!u)return null;var s=null!==(n=e.length)&&void 0!==n?n:9;return Object(c.jsx)("a",{href:"https://explorer.solana.com/".concat(i,"/").concat(u),target:"_blank",title:u,style:e.style,children:o?Object(c.jsx)(r.a.Text,{style:e.style,code:!0,children:Object(a.b)(u,s)}):Object(a.b)(u,s)})}},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(17),a=n(9),c=n(107),i=function e(t,n,r,c){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=c};i.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var u=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};u.type="MarketUpdate";var s=function(){function e(){Object(a.a)(this,e),this.emitter=new c.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(u.type,e),function(){return t.emitter.removeListener(u.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(u.type,new u(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(i.type,new i(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(2),a=n.n(r),c=n(7),i=n(0),o=n(71),u=n(46),s=n(47),l=n(299),f=n(710),d=n(711),b=n(129),p=n(87),h=n(721),g=n(412),v=n.n(g),m=n(411),j=n.n(m),x=n(4),O=function(e){var t=e.additionalSettings,n=Object(o.b)(),r=n.connected,g=n.disconnect,m=n.publicKey,O=Object(u.l)(),y=(O.endpoint,O.setEndpoint,O.env),w=Object(u.n)().setVisible,k=Object(i.useCallback)((function(){return w(!0)}),[w]),A=Object(u.m)().setModal,B=Object(p.a)(),S=Object(u.j)(),C=Object(i.useCallback)((function(){A(u.f.WALLET),w(!0)}),[A,w]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(f.a,{sx:{display:"flex",minWidth:"100%"},children:[!r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{style:{marginBottom:5},children:u.e.map((function(e){var t=e.name,n=e.endpoint;return Object(x.jsx)("option",{value:n,children:t})}))}),Object(x.jsx)(b.a,{variant:"contained",onClick:C,sx:{marginLeft:"10px"},children:"Connect"})]}),r&&Object(x.jsxs)(x.Fragment,{children:[m&&Object(x.jsxs)(b.a,{variant:"outlined",onClick:Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=4;break}return e.next=3,navigator.clipboard.writeText(m.toBase58());case 3:Object(s.c)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[Object(x.jsx)(l.a,{}),Object(s.d)(m.toBase58())]}),Object(x.jsx)(b.a,{variant:"outlined",onClick:k,sx:{marginLeft:"10px"},children:"Change Wallet"}),Object(x.jsxs)(b.a,{variant:"contained",color:"error",onClick:function(){return g().catch()},sx:{marginLeft:"10px"},children:["Disconnect (",y,")"]})]}),Object(x.jsx)(h.a,{sx:{ml:1},onClick:S.toggleColorMode,color:"inherit",children:"dark"===B.palette.mode?Object(x.jsx)(j.a,{}):Object(x.jsx)(v.a,{})}),t]})})}},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s.a}));var r=n(26),a=n(113),c=(n(0),n(756)),i=(n(698),n(4)),o=["children","closeIcon","bodyStyle","style"],u=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),u=(e.style,Object(a.a)(e,o));return Object(i.jsx)(c.a,Object(r.a)(Object(r.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(r.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:400},u),{},{children:t}))},s=(n(207),n(209),n(396))},242:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return m}));var r=n(24),a=n(15),c=n(2),i=n.n(c),o=n(7),u=n(9),s=n(6),l=n(46),f=n(47),d=n(83),b=n(33),p=new s.c("SAtnofysr9Uxk7m9YphxwfL5E3wyZJWUzjwA29Gw3tQ"),h=function e(t){Object(u.a)(this,e),this.instruction=0,this.makerSize=void 0,this.takerSize=void 0,this.bumpSeed=void 0,this.makerSize=t.makerSize,this.takerSize=t.takerSize,this.bumpSeed=t.bumpSeed};h.schema=new Map([[h,{kind:"struct",fields:[["instruction","u8"],["makerSize","u64"],["takerSize","u64"],["bumpSeed","u8"]]}]]);var g=function(){var t=Object(o.a)(i.a.mark((function t(n,r,a,c,o,u,l,f,g,v,m,j){var x,O,y;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x=new h({makerSize:v,takerSize:m,bumpSeed:j}),O=e.from(Object(d.serialize)(h.schema,x)),y=[{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:b.d,isSigner:!1,isWritable:!1}],f.toBase58()===b.c.toBase58()&&y.push({pubkey:s.e.programId,isSigner:!1,isWritable:!1}),t.abrupt("return",{ix:[new s.g({keys:y,programId:p,data:O})]});case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,i,o,u,s,l,f,d){return t.apply(this,arguments)}}(),v=function(){var t=Object(o.a)(i.a.mark((function t(n,r,c,o,u,d){var h,g,v,m,j,x,O,y,w,k=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=!(k.length>6&&void 0!==k[6])||k[6],d.publicKey){t.next=4;break}return Object(f.c)({message:"Wallet not connected!"}),t.abrupt("return",!1);case 4:return g=[],v=[],t.next=8,s.c.findProgramAddress([d.publicKey.toBuffer(),b.d.toBuffer(),r.toBuffer()],f.a);case 8:return m=t.sent[0],t.next=11,n.getAccountInfo(m);case 11:if(t.sent){t.next=15;break}return Object(f.c)({message:"User must have ATA to create offer"}),t.abrupt("return",!1);case 15:return t.next=17,s.c.findProgramAddress([d.publicKey.toBuffer(),b.d.toBuffer(),c.toBuffer()],f.a);case 17:return j=t.sent[0],t.next=20,n.getAccountInfo(j);case 20:return t.sent||Object(f.b)(v,j,d.publicKey,d.publicKey,c),j=c.toBase58()===b.c.toBase58()?d.publicKey:j,t.next=25,s.c.findProgramAddress([e.from("stateless_offer"),d.publicKey.toBuffer(),r.toBuffer(),c.toBuffer(),new Uint8Array(o.toArray("le",8)),new Uint8Array(u.toArray("le",8))],p);case 25:return x=t.sent,O=Object(a.a)(x,2),y=O[0],O[1],w=h?b.e.createApproveInstruction(b.d,m,y,d.publicKey,[],o.toNumber()):b.e.createRevokeInstruction(b.d,m,d.publicKey,[]),t.next=32,l.c.sendTransactionWithRetry(n,d,[].concat(v,[w]),g,"max");case 32:if(t.sent){t.next=38;break}return Object(f.c)({message:"Delegation transaction failed"}),t.abrupt("return",!1);case 38:return t.abrupt("return",!0);case 39:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,i){return t.apply(this,arguments)}}(),m=function(){var t=Object(o.a)(i.a.mark((function t(n,c,o,u,d,h,v){var m,j,x,O,y,w,k,A,B,S,C,E,T,P;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v.publicKey){t.next=3;break}return Object(f.c)({message:"Wallet not connected!"}),t.abrupt("return",!1);case 3:return m=[],j=[],t.next=7,s.c.findProgramAddress([c.toBuffer(),b.d.toBuffer(),o.toBuffer()],f.a);case 7:return x=t.sent[0],t.next=10,n.getAccountInfo(x);case 10:if(t.sent){t.next=13;break}return Object(f.c)({message:"Maker must have ATA for mint A"}),t.abrupt("return",!1);case 13:return t.next=15,s.c.findProgramAddress([c.toBuffer(),b.d.toBuffer(),u.toBuffer()],f.a);case 15:return O=t.sent[0],t.next=18,n.getAccountInfo(O);case 18:if(t.sent){t.next=21;break}return Object(f.c)({message:"Maker must have ATA for mint B"}),t.abrupt("return",!1);case 21:return t.next=23,s.c.findProgramAddress([v.publicKey.toBuffer(),b.d.toBuffer(),o.toBuffer()],f.a);case 23:return y=t.sent[0],t.next=26,n.getAccountInfo(y);case 26:return t.sent||Object(f.b)(j,y,v.publicKey,v.publicKey,o),t.next=30,s.c.findProgramAddress([v.publicKey.toBuffer(),b.d.toBuffer(),u.toBuffer()],f.a);case 30:return w=t.sent[0],t.next=33,n.getAccountInfo(new s.c(w));case 33:if(k=t.sent,console.log(u.toBase58()),console.log(b.c),k||u.toBase58()==b.c.toBase58()){t.next=39;break}return Object(f.c)({message:"Taker must have ATA for mint B"}),t.abrupt("return",!1);case 39:return O=u.toBase58()===b.c.toBase58()?c:O,w=u.toBase58()===b.c.toBase58()?v.publicKey:w,t.next=43,s.c.findProgramAddress([e.from("stateless_offer"),c.toBuffer(),o.toBuffer(),u.toBuffer(),new Uint8Array(d.toArray("le",8)),new Uint8Array(h.toArray("le",8))],p);case 43:return A=t.sent,B=Object(a.a)(A,2),S=B[0],C=B[1],t.next=49,g(c,v.publicKey,x,O,w,y,o,u,S,d,h,C);case 49:return E=t.sent,T=E.ix,P=T,t.next=54,l.c.sendTransactionWithRetry(n,v,[].concat(j,Object(r.a)(P)),m,"max");case 54:if(t.sent){t.next=60;break}return Object(f.c)({message:"Trade transaction failed"}),t.abrupt("return",!1);case 60:return t.abrupt("return",!0);case 61:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,i,o){return t.apply(this,arguments)}}()}).call(this,n(13).Buffer)},392:function(e,t,n){"use strict";(function(e){n(24),n(6),n(42),n(91)}).call(this,n(13).Buffer)},393:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n(33);var r=n(6),a=n(50);n(120),n(108);function c(t,n,c,i,o){var u=[{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:r.e.programId,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:r.d,isSigner:!1,isWritable:!1}];t.push(new r.g({keys:u,programId:a.c,data:e.from([])}))}}).call(this,n(13).Buffer)},396:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return A}));var r=n(16),a=n(26),c=n(15),i=n(29),o=n(2),u=n.n(o),s=n(7),l=n(0),f=n(718),d=n(129),b=n(182),p=n(46),h=n(47),g=n(33),v=n(242),m=n(6),j=n(42),x=n.n(j),O=n(71),y=n(4),w=function(e,t,n){var r=n[t].decimals;return Math.floor(parseFloat(e)*Math.pow(10,r))},k=function(){var t=Object(s.a)(u.a.mark((function t(n,r){var a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=w(n.sizeA,n.mintA,r),c=w(n.sizeB,n.mintB,r),t.next=5,m.c.findProgramAddress([e.from("stateless_offer"),new m.c(n.maker).toBuffer(),new m.c(n.mintA).toBuffer(),new m.c(n.mintB).toBuffer(),new Uint8Array(new x.a(a).toArray("le",8)),new Uint8Array(new x.a(c).toArray("le",8))],new m.c("SAtnofysr9Uxk7m9YphxwfL5E3wyZJWUzjwA29Gw3tQ"));case 5:return t.abrupt("return",t.sent[0]);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}();function A(){var e=Object(p.k)(),t=Object(O.b)(),n=Object(l.useState)(function(){var e,t=new URL(window.location.href),n=new URLSearchParams(t.search.slice(1)),r={mintA:"",mintB:"",sizeA:"0",sizeB:"0",maker:""},a=Object(i.a)(n.keys());try{for(a.s();!(e=a.n()).done;){var c=e.value;r[c]=n.get(c)}}catch(o){a.e(o)}finally{a.f()}return r}()),o=Object(c.a)(n,2),j=o[0],A=o[1],B=Object(l.useState)({}),S=Object(c.a)(B,2),C=S[0],E=S[1],T=Object(l.useState)({}),P=Object(c.a)(T,2),I=P[0],M=P[1],z=Object(l.useState)(!1),W=Object(c.a)(z,2),F=W[0],R=W[1],K=Object(l.useState)(!1),L=Object(c.a)(K,2),D=L[0],U=L[1],N=Object(l.useState)(!1),q=Object(c.a)(N,2),G=q[0],_=q[1];Object(l.useEffect)((function(){var e;t&&R((null===(e=t.publicKey)||void 0===e?void 0:e.toBase58())===j.maker)}),[j,t,R]),Object(l.useEffect)((function(){var t,n=function(){var n=Object(s.a)(u.a.mark((function n(){var r,a,c,i,o,l,f,d,b,v;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,r=new m.c(j.maker),a=new m.c(j.mintA),n.next=8;break;case 5:return n.prev=5,n.t0=n.catch(0),n.abrupt("return");case 8:return n.next=10,m.c.findProgramAddress([r.toBuffer(),g.d.toBuffer(),a.toBuffer()],h.a);case 10:return c=n.sent[0],n.next=13,e.getAccountInfo(c);case 13:if(!(i=n.sent)){n.next=25;break}if(console.log("Received account data"),o=Object(p.h)(i.data),console.log(o),E(o),(l=o.mint.toBase58())in I){f=I[l].decimals,d=o.amount*Math.pow(10,-f);try{b=parseFloat(j.sizeA),U(d>=b&&b>0)}catch(x){console.log("Not a valid float")}}return n.next=23,k(j,I);case 23:v=n.sent,o.delegate&&v&&0!=o.delegateOption&&v.toBase58()===o.delegate.toBase58()?_(!0):_(!1);case 25:t=e.onAccountChange(c,function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}if(console.log("Received account data"),e.prev=2,n=Object(p.h)(t.data),E(n),console.log(C),(r=n.mint.toBase58())in I){I[r].decimals,a=n.amount;try{c=parseFloat(j.sizeA),U(a>=c&&c>0)}catch(o){console.log("Not a valid float")}}return e.next=10,k(j,I);case 10:i=e.sent,n.delegate&&i&&0!=n.delegateOption&&i.toBase58()===n.delegate.toBase58()?_(!0):_(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("Failed to deserialize account",e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}());case 26:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(){return n.apply(this,arguments)}}(),c=function(){var t=Object(s.a)(u.a.mark((function t(){var n,c,i,o,s,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=0,i=[j.mintA,j.mintB];case 1:if(!(c<i.length)){t.next=19;break}o=i[c],t.prev=3,n=new m.c(o),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(3),console.log("Invalid Pubkey"),t.abrupt("continue",16);case 11:if(n.toBase58()in I){t.next=16;break}return t.next=14,e.getAccountInfo(n);case 14:if(s=t.sent)try{l=Object(p.i)(s.data),M(Object(a.a)(Object(a.a)({},I),{},Object(r.a)({},o,l))),console.log(I)}catch(u){console.log("Invalid Mint")}case 16:c++,t.next=1;break;case 19:case"end":return t.stop()}}),t,null,[[3,7]])})));return function(){return t.apply(this,arguments)}}();return n(),c(),function(){t&&e.removeAccountChangeListener(t)}}),[j,I,t,E,M]),Object(l.useEffect)((function(){return console.log(I)}),[I]),Object(l.useEffect)((function(){}),[j]);var J=function(e){return function(t){A(Object(a.a)(Object(a.a)({},j),{},Object(r.a)({},e,t.target.value)));var n=new URL(window.location.href),c=new URLSearchParams(n.search.slice(1));c.set(e,escape(t.target.value));var i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+c.toString();window.history.pushState({path:i},"",i)}},Q=function(e){if(e in j)return j[e]};return Object(y.jsxs)(f.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"50ch"}},noValidate:!0,autoComplete:"on",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(b.a,{required:!0,id:"outlined-required",label:"Seller Public Key",value:Q("maker"),onChange:J("maker")}),Object(y.jsx)(b.a,{required:!0,id:"outlined-required",label:"Seller Mint",value:Q("mintA"),onChange:J("mintA")}),Object(y.jsx)(b.a,{required:!0,id:"outlined-required",label:"Buyer Mint",value:Q("mintB"),onChange:J("mintB")}),Object(y.jsx)(b.a,{id:"outlined-number",label:"Seller Size",type:"number",value:Q("sizeA"),onChange:J("sizeA"),InputLabelProps:{shrink:!0}}),Object(y.jsx)(b.a,{id:"outlined-number",label:"Buyer Size",type:"number",value:Q("sizeB"),onChange:J("sizeB"),InputLabelProps:{shrink:!0}})]}),Object(y.jsx)("div",{style:{marginTop:"10px"},children:F?Object(y.jsxs)("div",{children:[Object(y.jsx)(d.a,{variant:"contained",onClick:function(){if(j)try{Object(v.a)(e,new m.c(j.mintA),new m.c(j.mintB),new x.a(w(j.sizeA,j.mintA,I)),new x.a(w(j.sizeB,j.mintB,I)),t)}catch(n){return}},sx:{marginRight:"4px"},children:"Open Offer"}),Object(y.jsx)(d.a,{variant:"contained",color:"error",sx:{marginRight:"4px"},onClick:function(){if(j)try{Object(v.a)(e,new m.c(j.mintA),new m.c(j.mintB),new x.a(w(j.sizeA,j.mintA,I)),new x.a(w(j.sizeB,j.mintB,I)),t,!1)}catch(n){return}},children:"Close Offer"})]}):G&&D?Object(y.jsx)("div",{children:Object(y.jsx)(d.a,{variant:"contained",color:"success",onClick:function(){if(j)try{Object(v.b)(e,new m.c(j.maker),new m.c(j.mintA),new m.c(j.mintB),new x.a(w(j.sizeA,j.mintA,I)),new x.a(w(j.sizeB,j.mintB,I)),t)}catch(n){return}},children:"Trade"})}):Object(y.jsx)("div",{children:" "})})]})}}).call(this,n(13).Buffer)},439:function(e,t){},440:function(e,t){},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"h",(function(){return r.d})),n.d(t,"i",(function(){return r.e})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"k",(function(){return a.useConnection})),n.d(t,"l",(function(){return a.useConnectionConfig})),n.d(t,"n",(function(){return h})),n.d(t,"g",(function(){return j})),n.d(t,"f",(function(){return g})),n.d(t,"m",(function(){return O})),n.d(t,"b",(function(){return k})),n.d(t,"j",(function(){return A}));var r=n(108),a=n(95),c=n(15),i=n(71),o=n(116),u=n(176),s=n(0),l=n.n(s),f=n(47),d=n(234),b=(n.p,n(4)),p=Object(s.createContext)({});function h(){return Object(s.useContext)(p)}var g,v=function(){var e=Object(i.b)(),t=e.wallets,n=(e.connected,e.wallet),r=e.select,a=h(),o=a.visible,l=a.setVisible,f=Object(s.useState)(!1),p=Object(c.a)(f,2),g=(p[0],p[1]),v=Object(s.useCallback)((function(){l(!1),g(!1)}),[l,g]);return Object(b.jsxs)(d.a,{visible:o,onCancel:v,children:[Object(b.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(b.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:n?"Change provider":""}),Object(b.jsx)("p",{style:{color:"white",fontSize:14},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(b.jsx)("br",{}),t.map((function(e){return Object(b.jsx)(u.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),v()},icon:Object(b.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},m=function(e){var t=e.children,n=Object(i.b)().publicKey,r=Object(s.useState)(!!n),a=Object(c.a)(r,2),o=a[0],u=a[1],l=Object(s.useState)(!1),d=Object(c.a)(l,2),h=d[0],g=d[1];return Object(s.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(f.c)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(s.useEffect)((function(){!n&&o&&Object(f.c)({message:"Wallet update",description:"Disconnected from wallet"}),u(!!n)}),[n,o,u]),Object(b.jsxs)(p.Provider,{value:{visible:h,setVisible:g},children:[t,Object(b.jsx)(v,{})]})},j=function(e){var t=e.children,n=Object(s.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(s.useCallback)((function(e){console.error(e),Object(f.c)({message:"Wallet error",description:e.message})}),[]);return Object(b.jsx)(i.a,{wallets:n,onError:r,autoConnect:!0,children:Object(b.jsx)(m,{children:t})})};!function(e){e.WALLET="wallet"}(g||(g={}));var x=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),O=function(){var e=Object(s.useContext)(x);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},y=n(87),w=l.a.createContext({}),k=function(e){var t=e.children,n=void 0===t?null:t,r=l.a.useState("dark"),a=Object(c.a)(r,2),i=a[0],o=a[1],u=Object(y.a)();return Object(b.jsx)(w.Provider,{value:{toggleColorMode:function(){o((function(e){return"light"===e?"dark":"light"}))},mode:i,theme:u},children:n})},A=function(){return Object(s.useContext)(w)}},462:function(e,t){},463:function(e,t){},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.c})),n.d(t,"c",(function(){return a.a})),n.d(t,"d",(function(){return c.b})),n.d(t,"b",(function(){return l.a}));n(208);var r=n(50),a=(n(120),n(392),n(206)),c=n(80);var i=n(6),o=n(83),u=n(51),s=n.n(u);o.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new i.c(e)},o.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},o.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return s.a.encode(e)},o.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(s.a.decode(e))};var l=n(393)},50:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return s}));n(9),n(17);var r=n(6),a=(new Map,new r.c("So11111111111111111111111111111111111111112")),c=new r.c("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),i=new r.c("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),o=new r.c("BPFLoaderUpgradeab1e11111111111111111111111"),u=new r.c("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),s=new r.c("11111111111111111111111111111111")},593:function(e,t){},595:function(e,t){},609:function(e,t){},613:function(e,t){},615:function(e,t){},626:function(e,t){},628:function(e,t){},655:function(e,t){},657:function(e,t){},662:function(e,t){},664:function(e,t){},671:function(e,t){},683:function(e,t){},686:function(e,t){},697:function(e,t){},698:function(e,t,n){},706:function(e,t,n){},707:function(e,t,n){},709:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(43),i=n.n(c),o=n(46),u=(n(702),n(703),n(704),n(705),n(706),n(710)),s=n(26),l=n(113),f=n(760),d=n(209),b=n(4),p=["isConnected","onClickConnect","onClickChange"],h=function(e){e.isConnected,e.onClickConnect,e.onClickChange;var t=Object(l.a)(e,p);return Object(b.jsx)(f.a,Object(s.a)(Object(s.a)({},t),{},{children:Object(b.jsx)(d.a,{})}))},g=n(71),v=function(){var e=Object(o.m)().setModal,t=Object(o.n)().setVisible,n=Object(g.b)().connected,a=Object(r.useCallback)((function(){return t(!0)}),[t]),c=Object(r.useCallback)((function(){e(o.f.WALLET),t(!0)}),[e,t]);return Object(b.jsxs)(u.a,{sx:{display:"flex",bgcolor:"action.disabledBackground"},minWidth:"100%",children:[Object(b.jsx)(u.a,{sx:{flexGrow:1}}),Object(b.jsx)(u.a,{sx:{display:"flex",height:"62px",justifyContent:"flex-end",alignItems:"center"},children:Object(b.jsx)(h,{isConnected:n,sx:{marginRight:"36px"},onClickConnect:c,onClickChange:a})})]})},m=n(234),j=n(296),x=n(759),O=n(755),y=n(718);var w=function(){var e=Object(o.j)(),t="dark"!==e.mode&&e.mode?"light":"dark";Object(r.useEffect)((function(){}),[e.mode]);var n=a.a.useMemo((function(){return Object(j.a)({palette:{mode:t}})}),[e.mode]);return Object(b.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(b.jsxs)(x.a,{theme:n,children:[Object(b.jsx)(O.a,{}),Object(b.jsx)(v,{}),Object(b.jsx)(y.a,{sx:{marginTop:"15%",width:600,px:"50%",display:"flex",alignSelf:"center",justifyContent:"center",alignContent:"center"},children:Object(b.jsx)(m.b,{})})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,761)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};n(707);i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(o.d,{children:Object(b.jsx)(o.g,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(o.b,{children:Object(b.jsx)(w,{})})})})})}),document.getElementById("root")),k()},80:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f}));n(29),n(2),n(7);var r=n(15),a=n(0),c=(n(6),n(42)),i=n.n(c),o=new i.a(10);o.pow(new i.a(18)),o.pow(new i.a(18)),o.pow(new i.a(27)),new i.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function u(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),c=Object(r.a)(n,2),i=c[0],o=c[1],u=Object(a.useCallback)((function(t){if(i!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[i,e]);return[i,u]}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function f(e){return new Promise((function(t){return setTimeout(t,e)}))}},95:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return v})),n.d(t,"ConnectionProvider",(function(){return x})),n.d(t,"useConnection",(function(){return O})),n.d(t,"useConnectionConfig",(function(){return y})),n.d(t,"getErrorForTransaction",(function(){return k})),n.d(t,"SequenceType",(function(){return w})),n.d(t,"sendTransactionsWithManualRetry",(function(){return A})),n.d(t,"sendTransactions",(function(){return S})),n.d(t,"sendTransaction",(function(){return C})),n.d(t,"sendTransactionWithRetry",(function(){return E})),n.d(t,"getUnixTs",(function(){return T})),n.d(t,"sendSignedTransaction",(function(){return I}));var r=n(2),a=n.n(r),c=n(7),i=n(24),o=n(15),u=n(80),s=n(6),l=n(0),f=n.n(l),d=n(206),b=n(207),p=n(181),h=n(11),g=n(4),v=[{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:p.a.Devnet},{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:p.a.MainnetBeta}],m=v[0].endpoint,j=f.a.createContext({endpoint:m,setEndpoint:function(){},connection:new s.a(m,"recent"),env:v[0].name,tokens:[],tokenMap:new Map});function x(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(u.d)("connectionEndpoint",v[0].endpoint),c=Object(o.a)(a,2),f=c[0],d=c[1],b=Object(l.useMemo)((function(){return new s.a(f,"recent")}),[f]),h=(null===(t=v.find((function(e){return e.endpoint===f})))||void 0===t?void 0:t.name)||v[0].name,m=Object(l.useState)([]),x=Object(o.a)(m,2),O=x[0],y=x[1],w=Object(l.useState)(new Map),k=Object(o.a)(w,2),A=k[0],B=k[1];return Object(l.useEffect)((function(){(new p.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=v.find((function(e){return e.endpoint===f})))||void 0===t?void 0:t.ChainId)||p.a.MainnetBeta).getList(),r=Object(i.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);B(r),y(n)}))}),[h]),Object(l.useEffect)((function(){var e=b.onAccountChange(s.b.generate().publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(l.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),Object(g.jsx)(j.Provider,{value:{endpoint:f,setEndpoint:d,connection:b,tokens:O,tokenMap:A,env:h},children:r})}function O(){return Object(l.useContext)(j).connection}function y(){var e=Object(l.useContext)(j);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var w,k=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,c=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&c.push(t[1])})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function A(e,t,n,r){return B.apply(this,arguments)}function B(){return(B=Object(c.a)(a.a.mark((function e(t,n,r,c){var i,o,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,o=0,u=null,s={},r=r.filter((function(e,t){return e.length>0||(s[t]=!0,!1)})),l=c.filter((function(e,t){return!s[t]}));case 6:if(!(i<r.length&&o<3)){e.next=29;break}if(r=r.slice(i,r.length),l=l.slice(i,l.length),r.length===u?o+=1:o=0,e.prev=10,1!==r.length){e.next=17;break}return e.next=14,E(t,n,r[0],l[0],"single");case 14:i=1,e.next=20;break;case 17:return e.next=19,S(t,n,r,l,w.StopOnFailure,"single");case 19:i=e.sent;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),console.error(e.t0);case 25:console.log("Died on ",i,"retrying from instruction",r[i],"instructions length is",r.length),u=r.length,e.next=6;break;case 29:case"end":return e.stop()}}),e,null,[[10,22]])})))).apply(this,arguments)}!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(w||(w={}));var S=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,u,l,f,d,b,p,g,v,m,j,x,O,y,k=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=k.length>4&&void 0!==k[4]?k[4]:w.Parallel,u=k.length>5&&void 0!==k[5]?k[5]:"singleGossip",l=k.length>6&&void 0!==k[6]?k[6]:function(e,t){},f=k.length>7&&void 0!==k[7]?k[7]:function(e,t){return!1},d=k.length>8?k[8]:void 0,n.publicKey){e.next=7;break}throw new h.i;case 7:if(b=[],d){e.next=12;break}return e.next=11,t.getRecentBlockhash(u);case 11:d=e.sent;case 12:p=function(e){var t=r[e],a=c[e];if(0===t.length)return"continue";var o=new s.f;t.forEach((function(e){return o.add(e)})),o.recentBlockhash=d.blockhash,o.setSigners.apply(o,[n.publicKey].concat(Object(i.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&o.partialSign.apply(o,Object(i.a)(a)),b.push(o)},g=0;case 14:if(!(g<r.length)){e.next=21;break}if("continue"!==p(g)){e.next=18;break}return e.abrupt("continue",18);case 18:g++,e.next=14;break;case 21:return e.next=23,n.signAllTransactions(b);case 23:v=e.sent,m=[],j={breakEarly:!1,i:0},console.log("Signed txns length",v.length,"vs handed in length",r.length),x=a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=I({connection:t,signedTransaction:v[n]})).then((function(e){var t=e.txid;e.slot;l(t,n)})).catch((function(e){f(v[n],n),o===w.StopOnFailure&&(j.breakEarly=!0,j.i=n)})),o===w.Parallel){e.next=16;break}return e.prev=3,e.next=6,r;case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),console.log("Caught failure",e.t0),!j.breakEarly){e.next=14;break}return console.log("Died on ",j.i),e.abrupt("return",{v:j.i});case 14:e.next=17;break;case 16:m.push(r);case 17:case"end":return e.stop()}}),e,null,[[3,8]])})),O=0;case 29:if(!(O<v.length)){e.next=37;break}return e.delegateYield(x(O),"t0",31);case 31:if("object"!==typeof(y=e.t0)){e.next=34;break}return e.abrupt("return",y.v);case 34:O++,e.next=29;break;case 37:if(o===w.Parallel){e.next=40;break}return e.next=40,Promise.all(m);case 40:return e.abrupt("return",v.length);case 41:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,u,l,f,p,v,m,j,x,O,y,w,A,B,S=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(S.length>4&&void 0!==S[4])||S[4],u=S.length>5&&void 0!==S[5]?S[5]:"singleGossip",l=S.length>6&&void 0!==S[6]&&S[6],f=S.length>7?S[7]:void 0,n.publicKey){e.next=6;break}throw new h.i;case 6:if(p=new s.f,r.forEach((function(e){return p.add(e)})),e.t0=f,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(u);case 12:e.t0=e.sent;case 13:if(p.recentBlockhash=e.t0.blockhash,l?(v=p).setSigners.apply(v,Object(i.a)(c.map((function(e){return e.publicKey})))):(m=p).setSigners.apply(m,[n.publicKey].concat(Object(i.a)(c.map((function(e){return e.publicKey}))))),c.length>0&&(j=p).partialSign.apply(j,Object(i.a)(c)),l){e.next=20;break}return e.next=19,n.signTransaction(p);case 19:p=e.sent;case 20:return x=p.serialize(),O={skipPreflight:!0,commitment:u},e.next=24,t.sendRawTransaction(x,O);case 24:if(y=e.sent,w=0,!o){e.next=39;break}return e.next=29,F(y,P,t,u);case 29:if(A=e.sent){e.next=32;break}throw new Error("Timed out awaiting confirmation on transaction");case 32:if(w=(null===A||void 0===A?void 0:A.slot)||0,!(null===A||void 0===A?void 0:A.err)){e.next=39;break}return e.next=36,k(t,y);case 36:throw B=e.sent,Object(d.a)({message:"Transaction failed...",description:Object(g.jsxs)(g.Fragment,{children:[B.map((function(e){return Object(g.jsx)("div",{children:e})})),Object(g.jsx)(b.a,{address:y,type:"transaction"})]}),type:"error"}),new Error("Raw transaction ".concat(y," failed"));case 39:return e.abrupt("return",{txid:y,slot:w});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,u,l,f,d,b,p,g,v,m,j,x=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=x.length>4&&void 0!==x[4]?x[4]:"singleGossip",u=x.length>5&&void 0!==x[5]&&x[5],l=x.length>6?x[6]:void 0,f=x.length>7?x[7]:void 0,n.publicKey){e.next=6;break}throw new h.i;case 6:if(d=new s.f,r.forEach((function(e){return d.add(e)})),e.t0=l,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(o);case 12:e.t0=e.sent;case 13:if(d.recentBlockhash=e.t0.blockhash,u?(b=d).setSigners.apply(b,Object(i.a)(c.map((function(e){return e.publicKey})))):(p=d).setSigners.apply(p,[n.publicKey].concat(Object(i.a)(c.map((function(e){return e.publicKey}))))),c.length>0&&(g=d).partialSign.apply(g,Object(i.a)(c)),u){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(d);case 20:d=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return",!1);case 26:return f&&f(),console.log("About to send"),e.prev=28,e.next=31,I({connection:t,signedTransaction:d});case 31:return v=e.sent,m=v.txid,j=v.slot,e.abrupt("return",{txid:m,slot:j});case 37:e.prev=37,e.t2=e.catch(28),console.error(e.t2);case 40:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),T=function(){return(new Date).getTime()/1e3},P=15e3;function I(e){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(a.a.mark((function e(t){var n,r,i,o,s,l,f,d,b,p,h,g,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,i=t.timeout,o=void 0===i?P:i,s=n.serialize(),l=T(),f=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return d=e.sent,console.log("Started awaiting confirmation for",d),b=!1,Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||!(T()-l<o)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,Object(u.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,F(d,o,r,"recent",!0);case 13:if(p=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!p.err){e.next=19;break}throw console.error(p.err),new Error("Transaction failed: Custom instruction error");case 19:f=(null===p||void 0===p?void 0:p.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return h=null,e.prev=28,e.next=31,z(r,n,"single");case 31:h=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!h||!h.err){e.next=47;break}if(!h.logs){e.next=46;break}g=h.logs.length-1;case 39:if(!(g>=0)){e.next=46;break}if(!(v=h.logs[g]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+v.slice("Program log: ".length));case 43:--g,e.next=39;break;case 46:throw new Error(JSON.stringify(h.err));case 47:return e.prev=47,b=!0,e.finish(47);case 50:return console.log("Latency",d,T()-l),e.abrupt("return",{txid:d,slot:f});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function z(e,t,n){return W.apply(this,arguments)}function W(){return(W=Object(c.a)(a.a.mark((function e(t,n,r){var c,i,o,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,c=n.serializeMessage(),i=n._serialize(c),o=i.toString("base64"),u=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",u);case 10:if(!(s=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+s.error.message);case 13:return e.abrupt("return",s.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n){return R.apply(this,arguments)}function R(){return R=Object(c.a)(a.a.mark((function e(t,n,r){var i,o,s,l,f,d=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>3&&void 0!==d[3]?d[3]:"recent",o=d.length>4&&void 0!==d[4]&&d[4],s=!1,l={slot:0,confirmations:0,err:null},f=0,e.next=7,new Promise(function(){var e=Object(c.a)(a.a.mark((function e(d,b){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{f=r.onSignature(t,(function(e,t){s=!0,l={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(l)):(console.log("Resolved via websocket",e),d(l))}),i)}catch(p){s=!0,console.error("WS error in setup",t,p)}case 2:if(s||!o){e.next=8;break}return Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,l=n&&n.value[0],console.log("https://explorer.solana.com/tx/".concat(t,"?cluster=devnet")),s||(l?l.err?(console.log("REST error for",t,l),s=!0,b(l.err)):l.confirmations?(console.log("REST confirmation for",t,l),s=!0,d(l)):console.log("REST no confirmations for",t,l):console.log("REST null result for",t,l)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(u.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return l=e.sent,r._signatureSubscriptions[f]&&r.removeSignatureListener(f),s=!0,console.log("Returning status",l),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}}},[[709,1,2]]]);
//# sourceMappingURL=main.54321de4.chunk.js.map