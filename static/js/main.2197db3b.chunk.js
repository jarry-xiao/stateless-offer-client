(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{111:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return B})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return M})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return I}));n(115);var r=n(15),a=n(29),c=n(27),i=n(2),o=n.n(i),s=n(7),u=n(0),l=n.n(u),f=n(98),d=n(71),b=n(6),p=n(35),h=(n(80),n(209)),v=n(50),m=n(122),g=n(4),j=l.a.createContext(null),x=new Map,O=new Map,y=new Map,w=new Map,k=function(){var t=Object(s.a)(o.a.mark((function t(n,r){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return c=e.from(a.data),t.abrupt("return",I(c));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),B=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=P(r);return{pubkey:t,account:Object(c.a)({},n),info:a}}},A=new Map,S={emitter:new h.a,query:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.c(n):n,c=a.toBase58(),!(i=O.get(c))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(s=x.get(c))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return S.add(a,e,r)})),x.set(c,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),c=n||A.get(a);if(!c)throw new Error("Deserializer needs to be registered or passed as a parameter");S.registerParser(e,c),x.delete(a);var i=c(a,t);if(i){void 0===r?r=!0:r instanceof Function&&(r=r(i));var o=!O.has(a);return O.set(a,i),S.emitter.raiseCacheUpdated(a,o,c,r),i}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,O.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!O.get(t)&&(O.delete(t),S.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(A.keys());try{for(r.s();!(t=r.n()).done;){var c=t.value;A.get(c)===e&&n.push(c)}}catch(i){r.e(i)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();A.set(n,t)}return e},queryMint:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.c(n):n,a=r.toBase58(),!(c=w.get(a))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(i=y.get(a))){e.next=8;break}return e.abrupt("return",i);case 8:return i=k(t,r).then((function(e){return y.delete(a),w.set(a,e),e})),y.set(a,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},addMint:function(e,t){var n=I(t.data),r=e.toBase58();return w.set(r,n),n}};var C=function(){var e=Object(f.useConnection)(),t=Object(d.b)().publicKey,n=Object(u.useState)(),a=Object(r.a)(n,2),c=a[0],i=a[1],l=Object(u.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.c(e);return{pubkey:e,account:t,info:{address:n,mint:v.f,owner:n,amount:new p.f(t.lamports),delegate:null,delegatedAmount:new p.f(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();S.registerParser(r,B),O.set(r,n),S.emitter.raiseCacheUpdated(r,!1,B,!0)}}}),[t]);return Object(u.useEffect)((function(){var n=0,r=function(e){e&&(l(e),i(e))};return Object(s.a)(o.a.mark((function a(){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:c=a.sent,r(c),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[i,t,e,l]),{nativeAccount:c}},E=new Set,T=function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return E.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(m.a)().token});case 5:e.sent.value.forEach((function(e){S.add(e.pubkey.toBase58(),e.account,B)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function M(e){var t=e.children,n=void 0===t?null:t,a=Object(f.useConnection)(),c=Object(d.b)().publicKey,i=Object(u.useState)([]),o=Object(r.a)(i,2),s=o[0],l=o[1],h=Object(u.useState)([]),v=Object(r.a)(h,2),x=v[0],O=v[1],y=C().nativeAccount,w=null===c||void 0===c?void 0:c.toBase58(),k=Object(u.useCallback)((function(){return S.byParser(B).map((function(e){return S.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===w})).map((function(e){return e}))}),[w]);return Object(u.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));O(e)}),[y,s,k]),Object(u.useEffect)((function(){var e=[];return S.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.c(t),(function(e){S.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(u.useEffect)((function(){if(a&&c){T(a,c).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(m.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===p.a.span){var n=P(e.accountInfo.data);E.has(n.owner.toBase58())&&(S.add(t,e.accountInfo,B),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,c,k]),Object(g.jsx)(j.Provider,{value:{userAccounts:x,nativeAccount:y},children:n})}var P=function(e){var t=p.a.decode(e);return t.mint=new b.c(t.mint),t.owner=new b.c(t.owner),t.amount=p.f.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new p.f(0)):(t.delegate=new b.c(t.delegate),t.delegatedAmount=p.f.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=p.f.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.c(t.closeAuthority),t},I=function(e){if(e.length!==p.b.span)throw new Error("Not a valid Mint");var t=p.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.c(t.mintAuthority),t.supply=p.f.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.c(t.freezeAuthority),t}}).call(this,n(14).Buffer)},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(2),n(7);var r=n(50),a=function(){return{token:r.e,associatedToken:r.c,bpf_upgrade_loader:r.a,system:r.d,memo:r.b}}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var r=n(300),a=n(4);function c(e){var t=e.message,n=void 0===t?"":t,c=e.description,i=void 0===c?void 0:c,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,f=e.placement,d=void 0===f?"bottomLeft":f;s&&(i=Object(a.jsx)(a.Fragment,{})),r.a[l]({message:Object(a.jsx)("span",{style:{color:"black"},children:n}),description:Object(a.jsx)("span",{style:{color:"black",opacity:.5},children:i}),placement:d,style:{backgroundColor:"white"}})}},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(728),a=n(80),c=n(4),i=function(e){var t,n,i=e.type,o=e.code,s="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!s)return null;var u=null!==(n=e.length)&&void 0!==n?n:9;return Object(c.jsx)("a",{href:"https://explorer.solana.com/".concat(i,"/").concat(s),target:"_blank",title:s,style:e.style,children:o?Object(c.jsx)(r.a.Text,{style:e.style,code:!0,children:Object(a.b)(s,u)}):Object(a.b)(s,u)})}},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(18),a=n(9),c=n(110),i=function e(t,n,r,c){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=c};i.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new c.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(i.type,new i(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(2),a=n.n(r),c=n(7),i=n(0),o=n(71),s=n(46),u=n(48),l=n(302),f=n(719),d=n(720),b=n(131),p=n(88),h=n(731),v=n(416),m=n.n(v),g=n(415),j=n.n(g),x=n(4),O=function(e){var t=e.additionalSettings,n=Object(o.b)(),r=n.connected,v=n.disconnect,g=n.publicKey,O=Object(s.l)(),y=(O.endpoint,O.setEndpoint),w=O.env,k=Object(s.n)().setVisible,B=Object(i.useCallback)((function(){return k(!0)}),[k]),A=Object(s.m)().setModal,S=Object(p.a)(),C=Object(s.j)(),E=Object(i.useCallback)((function(){A(s.f.WALLET),k(!0)}),[A,k]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(f.a,{sx:{display:"flex",minWidth:"100%"},children:[!r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{style:{marginBottom:5},onChange:function(e){return y(e.target.value)},children:s.e.map((function(e){var t=e.name,n=e.endpoint;return Object(x.jsx)("option",{value:n,children:t})}))}),Object(x.jsx)(b.a,{variant:"contained",onClick:E,sx:{marginLeft:"10px"},children:"Connect"})]}),r&&Object(x.jsxs)(x.Fragment,{children:[g&&Object(x.jsxs)(b.a,{variant:"outlined",onClick:Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=4;break}return e.next=3,navigator.clipboard.writeText(g.toBase58());case 3:Object(u.c)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[Object(x.jsx)(l.a,{}),Object(u.d)(g.toBase58())]}),Object(x.jsx)(b.a,{variant:"outlined",onClick:B,sx:{marginLeft:"10px"},children:"Change Wallet"}),Object(x.jsxs)(b.a,{variant:"contained",color:"error",onClick:function(){return v().catch()},sx:{marginLeft:"10px"},children:["Disconnect (",w,")"]})]}),Object(x.jsx)(h.a,{sx:{ml:1},onClick:C.toggleColorMode,color:"inherit",children:"dark"===S.palette.mode?Object(x.jsx)(j.a,{}):Object(x.jsx)(m.a,{})}),t]})})}},236:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u.a}));var r=n(27),a=n(115),c=(n(0),n(771)),i=(n(706),n(4)),o=["children","closeIcon","bodyStyle","style"],s=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),s=(e.style,Object(a.a)(e,o));return Object(i.jsx)(c.a,Object(r.a)(Object(r.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(r.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:400},s),{},{children:t}))},u=(n(208),n(210),n(399))},244:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g}));var r=n(26),a=n(15),c=n(2),i=n.n(c),o=n(7),s=n(9),u=n(6),l=n(46),f=n(48),d=n(83),b=n(35),p=new u.c("SAtnofysr9Uxk7m9YphxwfL5E3wyZJWUzjwA29Gw3tQ"),h=function e(t){Object(s.a)(this,e),this.instruction=0,this.makerSize=void 0,this.takerSize=void 0,this.bumpSeed=void 0,this.makerSize=t.makerSize,this.takerSize=t.takerSize,this.bumpSeed=t.bumpSeed};h.schema=new Map([[h,{kind:"struct",fields:[["instruction","u8"],["makerSize","u64"],["takerSize","u64"],["bumpSeed","u8"]]}]]);var v=function(){var t=Object(o.a)(i.a.mark((function t(n,r,a,c,o,s,l,f,v,m,g,j){var x,O,y;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x=new h({makerSize:m,takerSize:g,bumpSeed:j}),O=e.from(Object(d.serialize)(h.schema,x)),y=[{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:b.d,isSigner:!1,isWritable:!1}],f.toBase58()===b.c.toBase58()&&y.push({pubkey:u.e.programId,isSigner:!1,isWritable:!1}),t.abrupt("return",{ix:[new u.g({keys:y,programId:p,data:O})]});case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,i,o,s,u,l,f,d){return t.apply(this,arguments)}}(),m=function(){var t=Object(o.a)(i.a.mark((function t(n,r,c,o,s,d){var h,v,m,g,j,x,O,y,w,k=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=!(k.length>6&&void 0!==k[6])||k[6],d.publicKey){t.next=4;break}return Object(f.c)({message:"Wallet not connected!"}),t.abrupt("return",!1);case 4:return v=[],m=[],t.next=8,u.c.findProgramAddress([d.publicKey.toBuffer(),b.d.toBuffer(),r.toBuffer()],f.a);case 8:return g=t.sent[0],t.next=11,n.getAccountInfo(g);case 11:if(t.sent){t.next=15;break}return Object(f.c)({message:"User must have ATA to create offer"}),t.abrupt("return",!1);case 15:return t.next=17,u.c.findProgramAddress([d.publicKey.toBuffer(),b.d.toBuffer(),c.toBuffer()],f.a);case 17:return j=t.sent[0],t.next=20,n.getAccountInfo(j);case 20:return t.sent||Object(f.b)(m,j,d.publicKey,d.publicKey,c),j=c.toBase58()===b.c.toBase58()?d.publicKey:j,t.next=25,u.c.findProgramAddress([e.from("stateless_offer"),d.publicKey.toBuffer(),r.toBuffer(),c.toBuffer(),new Uint8Array(o.toArray("le",8)),new Uint8Array(s.toArray("le",8))],p);case 25:return x=t.sent,O=Object(a.a)(x,2),y=O[0],O[1],w=h?b.e.createApproveInstruction(b.d,g,y,d.publicKey,[],o.toNumber()):b.e.createRevokeInstruction(b.d,g,d.publicKey,[]),t.next=32,l.c.sendTransactionWithRetry(n,d,[].concat(m,[w]),v,"max");case 32:if(t.sent){t.next=38;break}return Object(f.c)({message:"Delegation transaction failed"}),t.abrupt("return",!1);case 38:return t.abrupt("return",!0);case 39:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,i){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(i.a.mark((function t(n,c,o,s,d,h,m){var g,j,x,O,y,w,k,B,A,S,C,E,T,M;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m.publicKey){t.next=3;break}return Object(f.c)({message:"Wallet not connected!"}),t.abrupt("return",!1);case 3:return g=[],j=[],t.next=7,u.c.findProgramAddress([c.toBuffer(),b.d.toBuffer(),o.toBuffer()],f.a);case 7:return x=t.sent[0],t.next=10,n.getAccountInfo(x);case 10:if(t.sent){t.next=13;break}return Object(f.c)({message:"Maker must have ATA for mint A"}),t.abrupt("return",!1);case 13:return t.next=15,u.c.findProgramAddress([c.toBuffer(),b.d.toBuffer(),s.toBuffer()],f.a);case 15:return O=t.sent[0],t.next=18,n.getAccountInfo(O);case 18:if(t.sent){t.next=21;break}return Object(f.c)({message:"Maker must have ATA for mint B"}),t.abrupt("return",!1);case 21:return t.next=23,u.c.findProgramAddress([m.publicKey.toBuffer(),b.d.toBuffer(),o.toBuffer()],f.a);case 23:return y=t.sent[0],t.next=26,n.getAccountInfo(y);case 26:return t.sent||Object(f.b)(j,y,m.publicKey,m.publicKey,o),t.next=30,u.c.findProgramAddress([m.publicKey.toBuffer(),b.d.toBuffer(),s.toBuffer()],f.a);case 30:return w=t.sent[0],t.next=33,n.getAccountInfo(new u.c(w));case 33:if(k=t.sent,console.log(s.toBase58()),console.log(b.c),k||s.toBase58()==b.c.toBase58()){t.next=39;break}return Object(f.c)({message:"Taker must have ATA for mint B"}),t.abrupt("return",!1);case 39:return O=s.toBase58()===b.c.toBase58()?c:O,w=s.toBase58()===b.c.toBase58()?m.publicKey:w,t.next=43,u.c.findProgramAddress([e.from("stateless_offer"),c.toBuffer(),o.toBuffer(),s.toBuffer(),new Uint8Array(d.toArray("le",8)),new Uint8Array(h.toArray("le",8))],p);case 43:return B=t.sent,A=Object(a.a)(B,2),S=A[0],C=A[1],t.next=49,v(c,m.publicKey,x,O,w,y,o,s,S,d,h,C);case 49:return E=t.sent,T=E.ix,M=T,t.next=54,l.c.sendTransactionWithRetry(n,m,[].concat(j,Object(r.a)(M)),g,"max");case 54:if(t.sent){t.next=60;break}return Object(f.c)({message:"Trade transaction failed"}),t.abrupt("return",!1);case 60:return Object(f.c)({message:"Trade successful"}),t.abrupt("return",!0);case 62:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,i,o){return t.apply(this,arguments)}}()}).call(this,n(14).Buffer)},395:function(e,t,n){"use strict";(function(e){n(26),n(6),n(42),n(94)}).call(this,n(14).Buffer)},396:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n(35);var r=n(6),a=n(50);n(122),n(111);function c(t,n,c,i,o){var s=[{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:r.e.programId,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:r.d,isSigner:!1,isWritable:!1}];t.push(new r.g({keys:s,programId:a.c,data:e.from([])}))}}).call(this,n(14).Buffer)},399:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return W}));var r=n(11),a=n(27),c=n(15),i=n(29),o=n(2),s=n.n(o),u=n(7),l=n(0),f=n(427),d=n(131),b=n(430),p=n(428),h=n(732),v=n(729),m=n(727),g=n(730),j=n(429),x=n(245),O=n(46),y=n(48),w=n(35),k=n(244),B=n(6),A=n(42),S=n.n(A),C=n(71),E=n(93),T=n(4),M=["None","SOL","USDC","USDT","BTC","ETH"],P=function(e,t,n){try{var r=n[t].decimals;return Math.floor(parseFloat(e)*Math.pow(10,r))}catch(a){return 0}},I=function(){var t=Object(u.a)(s.a.mark((function t(n,r){var a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=P(n.sizeA,n.mintA,r),c=P(n.sizeB,n.mintB,r),t.next=5,B.c.findProgramAddress([e.from("stateless_offer"),new B.c(n.maker).toBuffer(),new B.c(n.mintA).toBuffer(),new B.c(n.mintB).toBuffer(),new Uint8Array(new S.a(a).toArray("le",8)),new Uint8Array(new S.a(c).toArray("le",8))],new B.c("SAtnofysr9Uxk7m9YphxwfL5E3wyZJWUzjwA29Gw3tQ"));case 5:return t.abrupt("return",t.sent[0]);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}(),z=function(e,t,n,r,a,c,i,o){var s=n.mintA in r&&n.mintB in r,u=P(n.sizeA,n.mintA,r),l=P(n.sizeB,n.mintB,r);return!s||u<=0||l<=0?Object(T.jsx)("div",{}):a?Object(T.jsxs)("div",{children:[o&&Object(T.jsx)(d.a,{variant:"contained",onClick:function(){if(n)try{Object(k.a)(e,new B.c(n.mintA),new B.c(n.mintB),new S.a(u),new S.a(l),t)}catch(r){return}},sx:{marginRight:"4px"},children:"Open Offer"}),c&&Object(T.jsx)(d.a,{variant:"contained",color:"error",sx:{marginRight:"4px"},onClick:function(){if(n)try{Object(k.a)(e,new B.c(n.mintA),new B.c(n.mintB),new S.a(P(n.sizeA,n.mintA,r)),new S.a(P(n.sizeB,n.mintB,r)),t,!1)}catch(a){return}},children:"Close Offer"})]}):i&&o?Object(T.jsx)("div",{children:Object(T.jsx)(d.a,{variant:"contained",color:"success",onClick:function(){if(n)try{Object(k.b)(e,new B.c(n.maker),new B.c(n.mintA),new B.c(n.mintB),new S.a(P(n.sizeA,n.mintA,r)),new S.a(P(n.sizeB,n.mintB,r)),t)}catch(a){return}},children:"Trade"})}):Object(T.jsx)("div",{})};function W(){var e=Object(O.k)(),t=Object(C.b)(),n=Object(O.l)().env,o=Object(l.useState)(function(){var e,t=new URL(window.location.href),n=new URLSearchParams(t.search.slice(1)),r={mintA:"",mintB:"",sizeA:"0",sizeB:"0",maker:""},a=Object(i.a)(n.keys());try{for(a.s();!(e=a.n()).done;){var c=e.value;r[c]=n.get(c)}}catch(o){a.e(o)}finally{a.f()}return r}()),d=Object(c.a)(o,2),k=d[0],A=d[1],S=Object(l.useState)({}),P=Object(c.a)(S,2),W=P[0],F=P[1],L=Object(l.useState)({}),K=Object(c.a)(L,2),R=K[0],D=K[1],U=Object(l.useState)(!1),N=Object(c.a)(U,2),q=N[0],_=N[1],G=Object(l.useState)(!1),J=Object(c.a)(G,2),V=J[0],Q=J[1],H=Object(l.useState)(!1),X=Object(c.a)(H,2),Y=X[0],Z=X[1],$=Object(l.useState)(!1),ee=Object(c.a)($,2),te=ee[0],ne=ee[1],re=Object(l.useState)(!1),ae=Object(c.a)(re,2),ce=ae[0],ie=ae[1],oe=Object(l.useState)(null),se=Object(c.a)(oe,2),ue=(se[0],se[1],Object(l.useState)(new Map)),le=Object(c.a)(ue,2),fe=le[0],de=le[1];Object(l.useEffect)((function(){(new E.b).resolve().then((function(e){var t;"devnet"===n?t=e.filterByChainId(E.a.Devnet).getList():"mainnet-beta"===n?t=e.filterByChainId(E.a.MainnetBeta).getList():"testnet"===n&&(t=e.filterByChainId(E.a.Testnet).getList()),de(t.reduce((function(e,t){return e.set(t.symbol,t),e}),new Map))}))}),[de,n]),Object(l.useEffect)((function(){var e;t&&_((null===(e=t.publicKey)||void 0===e?void 0:e.toBase58())===k.maker)}),[k,t,_]),Object(l.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r,a,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=W).mint){e.next=3;break}return e.abrupt("return");case 3:if((n=t.mint.toBase58())in R){r=R[n].decimals,a=t.amount*Math.pow(10,-r);try{c=parseFloat(k.sizeA),Q(a>=c&&c>0)}catch(o){console.log("Not a valid float")}}return e.next=7,I(k,R);case 7:i=e.sent,Z(0!=t.delegateOption),t.delegate&&i&&0!=t.delegateOption&&i.toBase58()===t.delegate.toBase58()?ne(!0):ne(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[W,R,k]),Object(l.useEffect)((function(){var t,n=function(){var n=Object(u.a)(s.a.mark((function n(){var r,a,c,i,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,r=new B.c(k.maker),a=new B.c(k.mintA),n.next=8;break;case 5:return n.prev=5,n.t0=n.catch(0),n.abrupt("return");case 8:return n.next=10,B.c.findProgramAddress([r.toBuffer(),w.d.toBuffer(),a.toBuffer()],y.a);case 10:return c=n.sent[0],n.next=13,e.getAccountInfo(c);case 13:(i=n.sent)&&(o=Object(O.h)(i.data),console.log(k),console.log(o),F(o)),t=e.onAccountChange(c,function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){console.log("Received account data");try{n=Object(O.h)(t.data),F(n)}catch(r){console.log("Failed to deserialize account",r)}}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){t&&e.removeAccountChangeListener(t)}}),[k.maker,k.mintA,e,F]),Object(l.useEffect)((function(){var t=function(){var t=Object(u.a)(s.a.mark((function t(){var n,c,i,o,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=0,i=[k.mintA,k.mintB];case 1:if(!(c<i.length)){t.next=19;break}o=i[c],t.prev=3,n=new B.c(o),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(3),console.log("Invalid Pubkey"),t.abrupt("continue",16);case 11:if(n.toBase58()in R){t.next=16;break}return t.next=14,e.getAccountInfo(n);case 14:if(u=t.sent)try{l=Object(O.i)(u.data),D(Object(a.a)(Object(a.a)({},R),{},Object(r.a)({},o,l)))}catch(s){console.log("Invalid Mint")}case 16:c++,t.next=1;break;case 19:case"end":return t.stop()}}),t,null,[[3,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[R,k.mintA,k.mintB,e]);var be=function(e){return function(t){A(Object(a.a)(Object(a.a)({},k),{},Object(r.a)({},e,t.target.value)));var n=new URL(window.location.href),c=new URLSearchParams(n.search.slice(1));c.set(e,escape(t.target.value));var i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+c.toString();window.history.pushState({path:i},"",i)}},pe=function(e){if(e in k)return k[e]},he=function(e){"Enter"===e.key&&(ie(!1),console.log(e.key))};return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{children:Object(T.jsxs)(f.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"60ch"},justifyContent:"center",marginBottom:"5px"},noValidate:!0,autoComplete:"on",children:[Object(T.jsx)(j.a,{onClick:function(){if(n&&k&&k.mintA){var e="https://explorer.solana.com/address/".concat(k.mintA,"?cluster=").concat(n),t=window.open(e,"_blank");t&&t.focus()}},sx:{width:"30ch"},variant:"outlined",children:"Seller Mint (Explorer)"}),Object(T.jsx)(j.a,{onClick:function(){if(n&&k&&k.mintB){var e="https://explorer.solana.com/address/".concat(k.mintB,"?cluster=").concat(n),t=window.open(e,"_blank");t&&t.focus()}},sx:{width:"30ch"},variant:"outlined",children:"Buyer Mint (Explorer)"})]})}),Object(T.jsx)("div",{children:Object(T.jsxs)(f.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"60ch"}},noValidate:!0,autoComplete:"on",children:[Object(T.jsxs)("div",{children:[Object(T.jsx)(x.a,{required:!0,id:"outlined-required",label:"Seller Public Key",value:pe("maker"),onChange:be("maker")}),Object(T.jsx)(x.a,{required:!0,id:"outlined-required",label:"Seller Mint",value:pe("mintA"),onChange:be("mintA")}),Object(T.jsxs)(h.a,{children:[Object(T.jsx)(v.a,{id:"buyer-mint",children:"Buyer Mint"}),Object(T.jsx)(m.a,{sx:{display:"inline-block",textAlign:"left",width:"60ch"},labelId:"buyer-mint",value:pe("mintB"),input:Object(T.jsx)(g.a,{label:"Buyer Mint"}),onChange:be("mintB"),open:ce,onClose:function(e){ie(!1)},onOpen:function(e){console.log("opening"),ie(!0)},renderValue:function(e){return e},children:function(e){var t=[];t.push(Object(T.jsx)(b.a,{onKeyPress:he,sx:{marginLeft:"20px"},value:pe("mintB"),onChange:be("mintB")}));var n,r=Object(i.a)(M);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.get(a)?t.push(Object(T.jsx)(p.a,{value:e.get(a).address,children:a})):"None"===a&&t.push(Object(T.jsx)(p.a,{value:"",children:a}))}}catch(c){r.e(c)}finally{r.f()}return t}(fe)})]}),Object(T.jsx)(x.a,{id:"outlined-number",label:"Seller Size",type:"number",value:pe("sizeA"),onChange:be("sizeA"),InputLabelProps:{shrink:!0}}),Object(T.jsx)(x.a,{id:"outlined-number",label:"Buyer Size",type:"number",value:pe("sizeB"),onChange:be("sizeB"),InputLabelProps:{shrink:!0}})]}),Object(T.jsx)("div",{style:{marginTop:"10px"},children:z(e,t,k,R,q,Y,te,V)})]})})]})}}).call(this,n(14).Buffer)},447:function(e,t){},448:function(e,t){},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"h",(function(){return r.d})),n.d(t,"i",(function(){return r.e})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"k",(function(){return a.useConnection})),n.d(t,"l",(function(){return a.useConnectionConfig})),n.d(t,"n",(function(){return h})),n.d(t,"g",(function(){return j})),n.d(t,"f",(function(){return v})),n.d(t,"m",(function(){return O})),n.d(t,"b",(function(){return k})),n.d(t,"j",(function(){return B}));var r=n(111),a=n(98),c=n(15),i=n(71),o=n(118),s=n(177),u=n(0),l=n.n(u),f=n(48),d=n(236),b=(n.p,n(4)),p=Object(u.createContext)({});function h(){return Object(u.useContext)(p)}var v,m=function(){var e=Object(i.b)(),t=e.wallets,n=(e.connected,e.wallet),r=e.select,a=h(),o=a.visible,l=a.setVisible,f=Object(u.useState)(!1),p=Object(c.a)(f,2),v=(p[0],p[1]),m=Object(u.useCallback)((function(){l(!1),v(!1)}),[l,v]);return Object(b.jsxs)(d.a,{visible:o,onCancel:m,children:[Object(b.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(b.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:n?"Change provider":""}),Object(b.jsx)("p",{style:{color:"white",fontSize:14},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(b.jsx)("br",{}),t.map((function(e){return Object(b.jsx)(s.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),m()},icon:Object(b.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},g=function(e){var t=e.children,n=Object(i.b)().publicKey,r=Object(u.useState)(!!n),a=Object(c.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(!1),d=Object(c.a)(l,2),h=d[0],v=d[1];return Object(u.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(f.c)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(u.useEffect)((function(){!n&&o&&Object(f.c)({message:"Wallet update",description:"Disconnected from wallet"}),s(!!n)}),[n,o,s]),Object(b.jsxs)(p.Provider,{value:{visible:h,setVisible:v},children:[t,Object(b.jsx)(m,{})]})},j=function(e){var t=e.children,n=Object(u.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(u.useCallback)((function(e){console.error(e),Object(f.c)({message:"Wallet error",description:e.message})}),[]);return Object(b.jsx)(i.a,{wallets:n,onError:r,autoConnect:!0,children:Object(b.jsx)(g,{children:t})})};!function(e){e.WALLET="wallet"}(v||(v={}));var x=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),O=function(){var e=Object(u.useContext)(x);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},y=n(88),w=l.a.createContext({}),k=function(e){var t=e.children,n=void 0===t?null:t,r=l.a.useState("dark"),a=Object(c.a)(r,2),i=a[0],o=a[1],s=Object(y.a)();return Object(b.jsx)(w.Provider,{value:{toggleColorMode:function(){o((function(e){return"light"===e?"dark":"light"}))},mode:i,theme:s},children:n})},B=function(){return Object(u.useContext)(w)}},470:function(e,t){},471:function(e,t){},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.c})),n.d(t,"c",(function(){return a.a})),n.d(t,"d",(function(){return c.b})),n.d(t,"b",(function(){return l.a}));n(209);var r=n(50),a=(n(122),n(395),n(207)),c=n(80);var i=n(6),o=n(83),s=n(51),u=n.n(s);o.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new i.c(e)},o.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},o.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return u.a.encode(e)},o.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(u.a.decode(e))};var l=n(396)},50:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u}));n(9),n(18);var r=n(6),a=(new Map,new r.c("So11111111111111111111111111111111111111112")),c=new r.c("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),i=new r.c("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),o=new r.c("BPFLoaderUpgradeab1e11111111111111111111111"),s=new r.c("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),u=new r.c("11111111111111111111111111111111")},601:function(e,t){},603:function(e,t){},617:function(e,t){},621:function(e,t){},623:function(e,t){},634:function(e,t){},636:function(e,t){},663:function(e,t){},665:function(e,t){},670:function(e,t){},672:function(e,t){},679:function(e,t){},691:function(e,t){},694:function(e,t){},705:function(e,t){},706:function(e,t,n){},716:function(e,t,n){},717:function(e,t,n){},718:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(43),i=n.n(c),o=n(46),s=(n(712),n(713),n(714),n(715),n(716),n(719)),u=n(27),l=n(115),f=n(776),d=n(210),b=n(4),p=["isConnected","onClickConnect","onClickChange"],h=function(e){e.isConnected,e.onClickConnect,e.onClickChange;var t=Object(l.a)(e,p);return Object(b.jsx)(f.a,Object(u.a)(Object(u.a)({},t),{},{children:Object(b.jsx)(d.a,{})}))},v=n(71),m=function(){var e=Object(o.m)().setModal,t=Object(o.n)().setVisible,n=Object(v.b)().connected,a=Object(r.useCallback)((function(){return t(!0)}),[t]),c=Object(r.useCallback)((function(){e(o.f.WALLET),t(!0)}),[e,t]);return Object(b.jsxs)(s.a,{sx:{display:"flex",bgcolor:"action.disabledBackground"},minWidth:"100%",children:[Object(b.jsx)(s.a,{sx:{flexGrow:1}}),Object(b.jsx)(s.a,{sx:{display:"flex",height:"62px",justifyContent:"flex-end",alignItems:"center"},children:Object(b.jsx)(h,{isConnected:n,sx:{marginRight:"36px"},onClickConnect:c,onClickChange:a})})]})},g=n(236),j=n(299),x=n(774),O=n(770),y=n(427);var w=function(){var e=Object(o.j)(),t="dark"!==e.mode&&e.mode?"light":"dark";Object(r.useEffect)((function(){}),[e.mode]);var n=a.a.useMemo((function(){return Object(j.a)({palette:{mode:t}})}),[e.mode]);return Object(b.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(b.jsxs)(x.a,{theme:n,children:[Object(b.jsx)(O.a,{}),Object(b.jsx)(m,{}),Object(b.jsx)(y.a,{sx:{width:600,py:"10%",px:"50%",display:"flex",alignSelf:"center",justifyContent:"center",alignContent:"center"},children:Object(b.jsx)(g.b,{})})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,777)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};n(717);i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(o.d,{children:Object(b.jsx)(o.g,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(o.b,{children:Object(b.jsx)(w,{})})})})})}),document.getElementById("root")),k()},80:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f}));n(29),n(2),n(7);var r=n(15),a=n(0),c=(n(6),n(42)),i=n.n(c),o=new i.a(10);o.pow(new i.a(18)),o.pow(new i.a(18)),o.pow(new i.a(27)),new i.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),c=Object(r.a)(n,2),i=c[0],o=c[1],s=Object(a.useCallback)((function(t){if(i!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[i,e]);return[i,s]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function f(e){return new Promise((function(t){return setTimeout(t,e)}))}},98:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return m})),n.d(t,"ConnectionProvider",(function(){return x})),n.d(t,"useConnection",(function(){return O})),n.d(t,"useConnectionConfig",(function(){return y})),n.d(t,"getErrorForTransaction",(function(){return k})),n.d(t,"SequenceType",(function(){return w})),n.d(t,"sendTransactionsWithManualRetry",(function(){return B})),n.d(t,"sendTransactions",(function(){return S})),n.d(t,"sendTransaction",(function(){return C})),n.d(t,"sendTransactionWithRetry",(function(){return E})),n.d(t,"getUnixTs",(function(){return T})),n.d(t,"sendSignedTransaction",(function(){return P}));var r=n(2),a=n.n(r),c=n(7),i=n(26),o=n(15),s=n(80),u=n(6),l=n(0),f=n.n(l),d=n(207),b=n(208),p=n(93),h=n(13),v=n(4),m=[{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:p.a.Devnet},{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:p.a.MainnetBeta}],g=m[0].endpoint,j=f.a.createContext({endpoint:g,setEndpoint:function(){},connection:new u.a(g,"recent"),env:m[0].name,tokens:[],tokenMap:new Map});function x(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(s.d)("connectionEndpoint",m[0].endpoint),c=Object(o.a)(a,2),f=c[0],d=c[1],b=Object(l.useMemo)((function(){return new u.a(f,"recent")}),[f]),h=(null===(t=m.find((function(e){return e.endpoint===f})))||void 0===t?void 0:t.name)||m[0].name,g=Object(l.useState)([]),x=Object(o.a)(g,2),O=x[0],y=x[1],w=Object(l.useState)(new Map),k=Object(o.a)(w,2),B=k[0],A=k[1];return Object(l.useEffect)((function(){(new p.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=m.find((function(e){return e.endpoint===f})))||void 0===t?void 0:t.ChainId)||p.a.MainnetBeta).getList(),r=Object(i.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);A(r),y(n)}))}),[h]),Object(l.useEffect)((function(){var e=b.onAccountChange(u.b.generate().publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(l.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),Object(v.jsx)(j.Provider,{value:{endpoint:f,setEndpoint:d,connection:b,tokens:O,tokenMap:B,env:h},children:r})}function O(){return Object(l.useContext)(j).connection}function y(){var e=Object(l.useContext)(j);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var w,k=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,c=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&c.push(t[1])})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function B(e,t,n,r){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(a.a.mark((function e(t,n,r,c){var i,o,s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,o=0,s=null,u={},r=r.filter((function(e,t){return e.length>0||(u[t]=!0,!1)})),l=c.filter((function(e,t){return!u[t]}));case 6:if(!(i<r.length&&o<3)){e.next=29;break}if(r=r.slice(i,r.length),l=l.slice(i,l.length),r.length===s?o+=1:o=0,e.prev=10,1!==r.length){e.next=17;break}return e.next=14,E(t,n,r[0],l[0],"single");case 14:i=1,e.next=20;break;case 17:return e.next=19,S(t,n,r,l,w.StopOnFailure,"single");case 19:i=e.sent;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),console.error(e.t0);case 25:console.log("Died on ",i,"retrying from instruction",r[i],"instructions length is",r.length),s=r.length,e.next=6;break;case 29:case"end":return e.stop()}}),e,null,[[10,22]])})))).apply(this,arguments)}!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(w||(w={}));var S=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,s,l,f,d,b,p,v,m,g,j,x,O,y,k=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=k.length>4&&void 0!==k[4]?k[4]:w.Parallel,s=k.length>5&&void 0!==k[5]?k[5]:"singleGossip",l=k.length>6&&void 0!==k[6]?k[6]:function(e,t){},f=k.length>7&&void 0!==k[7]?k[7]:function(e,t){return!1},d=k.length>8?k[8]:void 0,n.publicKey){e.next=7;break}throw new h.i;case 7:if(b=[],d){e.next=12;break}return e.next=11,t.getRecentBlockhash(s);case 11:d=e.sent;case 12:p=function(e){var t=r[e],a=c[e];if(0===t.length)return"continue";var o=new u.f;t.forEach((function(e){return o.add(e)})),o.recentBlockhash=d.blockhash,o.setSigners.apply(o,[n.publicKey].concat(Object(i.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&o.partialSign.apply(o,Object(i.a)(a)),b.push(o)},v=0;case 14:if(!(v<r.length)){e.next=21;break}if("continue"!==p(v)){e.next=18;break}return e.abrupt("continue",18);case 18:v++,e.next=14;break;case 21:return e.next=23,n.signAllTransactions(b);case 23:m=e.sent,g=[],j={breakEarly:!1,i:0},console.log("Signed txns length",m.length,"vs handed in length",r.length),x=a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=P({connection:t,signedTransaction:m[n]})).then((function(e){var t=e.txid;e.slot;l(t,n)})).catch((function(e){f(m[n],n),o===w.StopOnFailure&&(j.breakEarly=!0,j.i=n)})),o===w.Parallel){e.next=16;break}return e.prev=3,e.next=6,r;case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),console.log("Caught failure",e.t0),!j.breakEarly){e.next=14;break}return console.log("Died on ",j.i),e.abrupt("return",{v:j.i});case 14:e.next=17;break;case 16:g.push(r);case 17:case"end":return e.stop()}}),e,null,[[3,8]])})),O=0;case 29:if(!(O<m.length)){e.next=37;break}return e.delegateYield(x(O),"t0",31);case 31:if("object"!==typeof(y=e.t0)){e.next=34;break}return e.abrupt("return",y.v);case 34:O++,e.next=29;break;case 37:if(o===w.Parallel){e.next=40;break}return e.next=40,Promise.all(g);case 40:return e.abrupt("return",m.length);case 41:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,s,l,f,p,m,g,j,x,O,y,w,B,A,S=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(S.length>4&&void 0!==S[4])||S[4],s=S.length>5&&void 0!==S[5]?S[5]:"singleGossip",l=S.length>6&&void 0!==S[6]&&S[6],f=S.length>7?S[7]:void 0,n.publicKey){e.next=6;break}throw new h.i;case 6:if(p=new u.f,r.forEach((function(e){return p.add(e)})),e.t0=f,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(s);case 12:e.t0=e.sent;case 13:if(p.recentBlockhash=e.t0.blockhash,l?(m=p).setSigners.apply(m,Object(i.a)(c.map((function(e){return e.publicKey})))):(g=p).setSigners.apply(g,[n.publicKey].concat(Object(i.a)(c.map((function(e){return e.publicKey}))))),c.length>0&&(j=p).partialSign.apply(j,Object(i.a)(c)),l){e.next=20;break}return e.next=19,n.signTransaction(p);case 19:p=e.sent;case 20:return x=p.serialize(),O={skipPreflight:!0,commitment:s},e.next=24,t.sendRawTransaction(x,O);case 24:if(y=e.sent,w=0,!o){e.next=39;break}return e.next=29,F(y,M,t,s);case 29:if(B=e.sent){e.next=32;break}throw new Error("Timed out awaiting confirmation on transaction");case 32:if(w=(null===B||void 0===B?void 0:B.slot)||0,!(null===B||void 0===B?void 0:B.err)){e.next=39;break}return e.next=36,k(t,y);case 36:throw A=e.sent,Object(d.a)({message:"Transaction failed...",description:Object(v.jsxs)(v.Fragment,{children:[A.map((function(e){return Object(v.jsx)("div",{children:e})})),Object(v.jsx)(b.a,{address:y,type:"transaction"})]}),type:"error"}),new Error("Raw transaction ".concat(y," failed"));case 39:return e.abrupt("return",{txid:y,slot:w});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,s,l,f,d,b,p,v,m,g,j,x=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=x.length>4&&void 0!==x[4]?x[4]:"singleGossip",s=x.length>5&&void 0!==x[5]&&x[5],l=x.length>6?x[6]:void 0,f=x.length>7?x[7]:void 0,n.publicKey){e.next=6;break}throw new h.i;case 6:if(d=new u.f,r.forEach((function(e){return d.add(e)})),e.t0=l,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(o);case 12:e.t0=e.sent;case 13:if(d.recentBlockhash=e.t0.blockhash,s?(b=d).setSigners.apply(b,Object(i.a)(c.map((function(e){return e.publicKey})))):(p=d).setSigners.apply(p,[n.publicKey].concat(Object(i.a)(c.map((function(e){return e.publicKey}))))),c.length>0&&(v=d).partialSign.apply(v,Object(i.a)(c)),s){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(d);case 20:d=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return",!1);case 26:return f&&f(),console.log("About to send"),e.prev=28,e.next=31,P({connection:t,signedTransaction:d});case 31:return m=e.sent,g=m.txid,j=m.slot,e.abrupt("return",{txid:g,slot:j});case 37:e.prev=37,e.t2=e.catch(28),console.error(e.t2);case 40:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),T=function(){return(new Date).getTime()/1e3},M=15e3;function P(e){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(a.a.mark((function e(t){var n,r,i,o,u,l,f,d,b,p,h,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,i=t.timeout,o=void 0===i?M:i,u=n.serialize(),l=T(),f=0,e.next=6,r.sendRawTransaction(u,{skipPreflight:!0});case 6:return d=e.sent,console.log("Started awaiting confirmation for",d),b=!1,Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||!(T()-l<o)){e.next=6;break}return r.sendRawTransaction(u,{skipPreflight:!0}),e.next=4,Object(s.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,F(d,o,r,"recent",!0);case 13:if(p=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!p.err){e.next=19;break}throw console.error(p.err),new Error("Transaction failed: Custom instruction error");case 19:f=(null===p||void 0===p?void 0:p.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return h=null,e.prev=28,e.next=31,z(r,n,"single");case 31:h=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!h||!h.err){e.next=47;break}if(!h.logs){e.next=46;break}v=h.logs.length-1;case 39:if(!(v>=0)){e.next=46;break}if(!(m=h.logs[v]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+m.slice("Program log: ".length));case 43:--v,e.next=39;break;case 46:throw new Error(JSON.stringify(h.err));case 47:return e.prev=47,b=!0,e.finish(47);case 50:return console.log("Latency",d,T()-l),e.abrupt("return",{txid:d,slot:f});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function z(e,t,n){return W.apply(this,arguments)}function W(){return(W=Object(c.a)(a.a.mark((function e(t,n,r){var c,i,o,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,c=n.serializeMessage(),i=n._serialize(c),o=i.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n){return L.apply(this,arguments)}function L(){return L=Object(c.a)(a.a.mark((function e(t,n,r){var i,o,u,l,f,d=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>3&&void 0!==d[3]?d[3]:"recent",o=d.length>4&&void 0!==d[4]&&d[4],u=!1,l={slot:0,confirmations:0,err:null},f=0,e.next=7,new Promise(function(){var e=Object(c.a)(a.a.mark((function e(d,b){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){u||(u=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{f=r.onSignature(t,(function(e,t){u=!0,l={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(l)):(console.log("Resolved via websocket",e),d(l))}),i)}catch(p){u=!0,console.error("WS error in setup",t,p)}case 2:if(u||!o){e.next=8;break}return Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,l=n&&n.value[0],console.log("https://explorer.solana.com/tx/".concat(t,"?cluster=devnet")),u||(l?l.err?(console.log("REST error for",t,l),u=!0,b(l.err)):l.confirmations?(console.log("REST confirmation for",t,l),u=!0,d(l)):console.log("REST no confirmations for",t,l):console.log("REST null result for",t,l)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u||console.log("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(s.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return l=e.sent,r._signatureSubscriptions[f]&&r.removeSignatureListener(f),u=!0,console.log("Returning status",l),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}}},[[718,1,2]]]);
//# sourceMappingURL=main.2197db3b.chunk.js.map